import { EventEmitter } from '../components/base/events';
import { ApiService } from '../components/base/ApiService';
import { CatalogView } from '../views/CatalogView';
import { IProductItem } from '../types';

export interface ICatalogControllerConstructor {
  api: ApiService;
  events: EventEmitter;
  view: CatalogView;
}

export class CatalogController {
  constructor(
    private api: ApiService,
    private events: EventEmitter,
    private view: CatalogView
  ) {}

  public init(): void {
    this.api.getProductList()
      .then((response) => {
        const items: IProductItem[] = response.items;
        this.view.render(items);
      })
      .catch((err) => console.error('Ошибка загрузки каталога:', err));
  }
}

export class Modal {
  private container: HTMLElement;
  private content: HTMLElement;
  private listener: (event: MouseEvent) => void;

  public onClose?: () => void;

  constructor() {
    this.container = document.querySelector('.modal') as HTMLElement;
    this.content = this.container.querySelector('.modal__content') as HTMLElement;

    this.listener = (event: MouseEvent) => {
      if ((event.target as HTMLElement).closest('.modal__content')) return;
      this.close();
    };
  }

  public open(content: HTMLElement): void {
    this.content.innerHTML = '';
    this.content.append(content);
    this.container.classList.add('modal_active');
    document.body.classList.add('body_fixed');
    this.container.addEventListener('click', this.listener);
  }

  public close(): void {
    this.container.classList.remove('modal_active');
    document.body.classList.remove('body_fixed');
    this.container.removeEventListener('click', this.listener);

    this.onClose?.();
  }
}
